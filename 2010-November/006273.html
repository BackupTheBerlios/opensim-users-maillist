<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Out of Memory Exception on IAR Save?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Out%20of%20Memory%20Exception%20on%20IAR%20Save%3F&In-Reply-To=%3C4CF06223.70409%40cox.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006271.html">
   <LINK REL="Next"  HREF="006276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Out of Memory Exception on IAR Save?</H1>
    <B>Chris</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Out%20of%20Memory%20Exception%20on%20IAR%20Save%3F&In-Reply-To=%3C4CF06223.70409%40cox.net%3E"
       TITLE="[Opensim-users] Out of Memory Exception on IAR Save?">mewtwo0641 at cox.net
       </A><BR>
    <I>Sat Nov 27 02:42:59 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006271.html">[Opensim-users] Out of Memory Exception on IAR Save?
</A></li>
        <LI>Next message: <A HREF="006276.html">[Opensim-users] Out of Memory Exception on IAR Save?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6273">[ date ]</a>
              <a href="thread.html#6273">[ thread ]</a>
              <a href="subject.html#6273">[ subject ]</a>
              <a href="author.html#6273">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alright, will do that. Thank you!
I posted a mantis on this <A HREF="http://opensimulator.org/mantis/view.php?id=5238">http://opensimulator.org/mantis/view.php?id=5238</A>

Will report on my findings soon =)

On 11/26/2010 6:57 PM, Justin Clark-Casey wrote:
&gt;<i> It looks like OpenSim is somehow running out of memory during a search 
</I>&gt;<i> and replace operation.  I should think that the same problem would 
</I>&gt;<i> exist on 0.7.0.2 and master.
</I>&gt;<i>
</I>&gt;<i> The only thing I can think of is that one of your assets is absolutely 
</I>&gt;<i> huge, much bigger than could be reasonably expected.
</I>&gt;<i>
</I>&gt;<i> I patched 0.6.9-post-fixes (and master, 0.7-post-fixes) to log on the 
</I>&gt;<i> console which asset causes the problem.  If you can build 
</I>&gt;<i> 0.6.9-post-fixes from source then I suggest that you try this and then 
</I>&gt;<i> look in the database to see if there's anything unusual about that 
</I>&gt;<i> asset (e.g. if it's very very large).
</I>&gt;<i>
</I>&gt;<i> Otherwise, I'm afraid you will have to wait until 0.7.1 is released 
</I>&gt;<i> before you can get this information.
</I>&gt;<i>
</I>&gt;<i> On 25/11/10 05:29, Chris wrote:
</I>&gt;&gt;<i> That is odd because I'm not actually running OpenSim from any 
</I>&gt;&gt;<i> directory with &quot;New Folder&quot; in it... This is the path I'm
</I>&gt;&gt;<i> running from: C:\Documents and Settings\Chris\Desktop\OpenSim\OS 069 
</I>&gt;&gt;<i> Post Fixes\bin
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is OpenSim 0.6.9 Post-Fixes I am using; Since the latest stable 
</I>&gt;&gt;<i> is 0.7.0.2 should I still file a Mantis report on
</I>&gt;&gt;<i> it? Thank you! =)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 11/24/2010 5:33 PM, Justin Clark-Casey wrote:
</I>&gt;&gt;&gt;<i> On 23/11/10 23:49, Chris wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi all. I've recently been getting 'System.OutOfMemoryException' 
</I>&gt;&gt;&gt;&gt;<i> errors when I attempt to save my avatar's entire
</I>&gt;&gt;&gt;&gt;<i> inventory with the Inventory Archiver. It will go through the usual 
</I>&gt;&gt;&gt;&gt;<i> process of finding the directories to archive and
</I>&gt;&gt;&gt;&gt;<i> after it finds so many it will give me that exception and then 
</I>&gt;&gt;&gt;&gt;<i> terminate the IAR job (usually before it ever reaches the
</I>&gt;&gt;&gt;&gt;<i> assets stage). I usually have to restart the server several times 
</I>&gt;&gt;&gt;&gt;<i> (and try to save an IAR each time) in order to get it
</I>&gt;&gt;&gt;&gt;<i> to save the IAR successfully.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I have checked to make sure that I am not running out of RAM (still 
</I>&gt;&gt;&gt;&gt;<i> have ~1.5 gigs free while every thing is up and
</I>&gt;&gt;&gt;&gt;<i> running and IAR is being saved) or Virtual Memory/Page File when I 
</I>&gt;&gt;&gt;&gt;<i> attempt this and I have plenty of HD space where I am
</I>&gt;&gt;&gt;&gt;<i> saving the IAR so I am at a loss as to why this is happening all of 
</I>&gt;&gt;&gt;&gt;<i> a sudden. I did notice something strange in the
</I>&gt;&gt;&gt;&gt;<i> exception message that I received and that is the fact that it 
</I>&gt;&gt;&gt;&gt;<i> seems to be trying to access &quot;New Folder&quot; on my desktop
</I>&gt;&gt;&gt;&gt;<i> when there isn't a directory on my desktop called &quot;New Folder&quot; and 
</I>&gt;&gt;&gt;&gt;<i> I didn't direct it to save to New Folder either (I am
</I>&gt;&gt;&gt;&gt;<i> saving to C:\inventory.iar btw)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is strange. Could you open a Mantis bug report and put this 
</I>&gt;&gt;&gt;<i> information there, along with the exact version
</I>&gt;&gt;&gt;<i> number or Git revision of OpenSim that you're using.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> From the stack trace, you're running OpenSim from the path
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;c:\Documents and Settings\Chris\Desktop\New Folder&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> which I imagine is where &quot;New Folder&quot; is coming from.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Any suggestions or insight would be much appreciated =)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Exception:
</I>&gt;&gt;&gt;&gt;<i> 2010-11-23 00:13:27,406 ERROR - OpenSim.Application Command error: 
</I>&gt;&gt;&gt;&gt;<i> System.OutOfMemoryException: Exception
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> of type 'System.OutOfMemoryException' was thrown.
</I>&gt;&gt;&gt;&gt;<i> at System.String.Replace(String oldValue, String newValue)
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.Framework.Scenes.Serialization.SceneObjectSerializer.FromOriginalXmlFormat(UUID 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> fromUserInventoryItemID, String xmlData) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\Framework\Scenes\Serialization\SceneObjectSerializer.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 69
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.Framework.Scenes.Serialization.SceneObjectSerializer.FromOriginalXmlFormat(String 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> serialization) in c:\Documents and Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\Framework\Scenes\Serialization\SceneObjectSerializer.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 55
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.Framework.Scenes.UuidGatherer.GetSceneObjectAssetUuids(UUID 
</I>&gt;&gt;&gt;&gt;<i> sceneObjectUuid,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> IDictionary`2 assetUuids) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\Framework\Scenes\UuidGatherer.cs:line 280
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.Framework.Scenes.UuidGatherer.GatherAssetUuids(UUID 
</I>&gt;&gt;&gt;&gt;<i> assetUuid, AssetType assetType,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> IDictionary`2 assetUuids) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\Framework\Scenes\UuidGatherer.cs:line 105
</I>&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiveWriteRequest.SaveInvItem(InventoryIt 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> emBase inventoryItem, String path) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiveWriteRequest.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 156
</I>&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiveWriteRequest.SaveInvFolder(Inventory 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> FolderBase inventoryFolder, String path, Boolean 
</I>&gt;&gt;&gt;&gt;<i> saveThisFolderItself) in c:\Documents and
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiveWriteRequest.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 207
</I>&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiveWriteRequest.SaveInvFolder(Inventory 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> FolderBase inventoryFolder, String path, Boolean 
</I>&gt;&gt;&gt;&gt;<i> saveThisFolderItself) in c:\Documents and
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiveWriteRequest.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 202
</I>&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiveWriteRequest.SaveInvFolder(Inventory 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> FolderBase inventoryFolder, String path, Boolean 
</I>&gt;&gt;&gt;&gt;<i> saveThisFolderItself) in c:\Documents and
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiveWriteRequest.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 202
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiveWriteRequest.Execute() 
</I>&gt;&gt;&gt;&gt;<i> in
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> c:\Documents and Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiveWriteRequest.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 303
</I>&gt;&gt;&gt;&gt;<i> at 
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiverModule.ArchiveInventory(Guid 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> id, String firstName, String lastName, String invPath, String pass, 
</I>&gt;&gt;&gt;&gt;<i> String savePath) in c:\Documents and
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiverModule.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 174
</I>&gt;&gt;&gt;&gt;<i> at
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> OpenSim.Region.CoreModules.Avatar.Inventory.Archiver.InventoryArchiverModule.HandleSaveInvConsoleCommand( 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> String module, String[] cmdparams) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\CoreModules\Avatar\Inventory\Archiver\InventoryArchiverModule.cs:line 
</I>&gt;&gt;&gt;&gt;<i> 341
</I>&gt;&gt;&gt;&gt;<i> at OpenSim.Framework.Console.Commands.Resolve(String[] cmd) in 
</I>&gt;&gt;&gt;&gt;<i> c:\Documents and
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New 
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Framework\Console\CommandConsole.cs:line 364
</I>&gt;&gt;&gt;&gt;<i> at OpenSim.Framework.Console.LocalConsole.ReadLine(String p, 
</I>&gt;&gt;&gt;&gt;<i> Boolean isCommand, Boolean e) in
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> c:\Documents and Settings\Chris\Desktop\New 
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Framework\Console\LocalConsole.cs:line 473
</I>&gt;&gt;&gt;&gt;<i> at OpenSim.Framework.Console.CommandConsole.Prompt() in 
</I>&gt;&gt;&gt;&gt;<i> c:\Documents and Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Framework\Console\CommandConsole.cs:line 583
</I>&gt;&gt;&gt;&gt;<i> at OpenSim.Application.Main(String[] args) in c:\Documents and 
</I>&gt;&gt;&gt;&gt;<i> Settings\Chris\Desktop\New
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Folder\OpenSim\Region\Application\Application.cs:line 165
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006271.html">[Opensim-users] Out of Memory Exception on IAR Save?
</A></li>
	<LI>Next message: <A HREF="006276.html">[Opensim-users] Out of Memory Exception on IAR Save?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6273">[ date ]</a>
              <a href="thread.html#6273">[ thread ]</a>
              <a href="subject.html#6273">[ subject ]</a>
              <a href="author.html#6273">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
