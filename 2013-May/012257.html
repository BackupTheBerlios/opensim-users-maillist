<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Waiting for Region Handshake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2013-May/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Waiting%20for%20Region%20Handshake&In-Reply-To=%3CEF1A97624C6B4C3996AF42735E48EE86%40GABPC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012255.html">
   <LINK REL="Next"  HREF="012269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Waiting for Region Handshake</H1>
    <B>Gary Beck</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Waiting%20for%20Region%20Handshake&In-Reply-To=%3CEF1A97624C6B4C3996AF42735E48EE86%40GABPC%3E"
       TITLE="[Opensim-users] Waiting for Region Handshake">gab4gab at gmail.com
       </A><BR>
    <I>Sat May 18 13:38:48 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="012255.html">[Opensim-users] Waiting for Region Handshake
</A></li>
        <LI>Next message: <A HREF="012269.html">[Opensim-users] Waiting for Region Handshake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12257">[ date ]</a>
              <a href="thread.html#12257">[ thread ]</a>
              <a href="subject.html#12257">[ subject ]</a>
              <a href="author.html#12257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paul,
    The values in standaloinecommon.ini may need changing to support other things.  Waiting for region handshake is caused by the regions.ini setting as mentioned by Fleep Tuque.  The ExternalHostName is resolved by the server to an address.  The server passes that address along with the port number (InternalPort) to the viewer.  If the address passed is a local LAN address rather than your external IP address then you will stall 'waiting for region handshake' when logging in from outside the LAN.  Hope that helps.
- Gary Beck
  ----- Original Message ----- 
  From: Paul Rayner 
  To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
  Sent: Saturday, May 18, 2013 3:08 AM
  Subject: Re: [Opensim-users] Waiting for Region Handshake


  In trying to resolve this, I followed the advice Fleep provided.
  I believe I can satisfy all of the suggestions made.
  Checking my standalonecommon.ini, I found many instances of 127.0.0.1 - lines 68,76,78-83,155,271,274,290,291,309....should they all be changed to my external IP address?
  With attachment this time



  On Thu, May 16, 2013 at 9:24 PM, Fleep Tuque &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">fleep513 at gmail.com</A>&gt; wrote:

    Hi Paul,


    This is a fairly common question that can have a number of different root causes.  


    It might be helpful to go over the details of exactly what happens when you try to log in.  Based on previous posts from Justin, Diva and others, this is my understanding of how it works:  When you start up the client and enter your name/password, it sends those details to the OpenSim login service. If your password is correct, it tells the region simulator that you're coming.  The login service then sends back to your client the IP address and port to use to enter that region based on the information in the regions.ini configuration file.  Your client then connects to the region using those details.  


    If you are stuck at &quot;Connecting to Region..&quot; or &quot;Waiting for region handshake...&quot; then your client successfully connected to the Opensim login service, but the information it is using to try to connect to the region (IP address and port number) is not allowing the connection.  This can be any number of issues related to your networking setup.  


    1)  Check to make sure you have the correct ports open on your router and firewall by reviewing the Opensim Network Settings page and Firewall settings page.  You can verify this by using 3rd party port checker software, I've used this successfully:  <A HREF="http://portforward.com/help/portcheck.htm">http://portforward.com/help/portcheck.htm</A>


    2)  If you are on a home network, make sure your router supports NAT Loopback, per the instructions on the Opensim wiki:  <A HREF="http://opensimulator.org/wiki/NAT_Loopback_Routers">http://opensimulator.org/wiki/NAT_Loopback_Routers</A>


    3)  If you do not have a router that supports NAT Loopback, or are on a corporate or campus network with 1-to-1 NATing, you will need to have an external static IP address assigned to your server for users outside your network to connect.  See this thread for more information:  <A HREF="http://opensim-users.2152040.n2.nabble.com/NAT-amp-Corporate-Firewall-td6223654.html">http://opensim-users.2152040.n2.nabble.com/NAT-amp-Corporate-Firewall-td6223654.html</A>


    I run FleepGrid from home and since my router didn't support NAT Loopback, I got a static IP address from my ISP and that resolved all my issues with people not being able to connect from outside my home network.  I had to do the same thing at work for the university grid, having it placed in the DMZ and assigned an external only static IP.


    Hope this info is helpful.  Good luck and let us know how it goes!


    - Chris/Fleep




    Chris M. Collins (SL/OS: Fleep Tuque)
    Center for Simulations &amp; Virtual Environments Research (UCSIM)
    UCIT Instructional &amp; Research Computing
    University of Cincinnati
    406A Zimmer Hall
    315 College Drive
    PO BOX 210088
    Cincinnati, OH 45221-0088
    <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">chris.collins at uc.edu</A>
    (513) 556-3018


    <A HREF="http://ucsim.uc.edu">http://ucsim.uc.edu</A>


    On Thu, May 16, 2013 at 5:39 AM, Paul Rayner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">prayner.basil at gmail.com</A>&gt; wrote:

      Hi
      I'm hosting a standalone OpenSim 0.7.5 at home, on Ubuntu 11.10 64bit.


      I need/want it for school, and when I try and connect from school I get a &quot;Waiting for Region Handshake&quot; error when trying to connect with Imprudence viewer.


      I believe I've ascertained the school firewall is open - I used <A HREF="http://124.254.81.40:9000/simstatus">http://124.254.81.40:9000/simstatus</A> and got the required OK.


      My router is a Billion Bipac 7300A. In reading OpenSim documentation, I only found at last week I need reverse NAT (or something to that effect). I had never seen it in any system requirements. After checking the web, I believe the router does support it.


      I can connect fine from my LAN.


      I'd appreciate ANY advice I can get to have it up and running. I'd dearly love to have it working ASAP - after a long wait to have the port open at school. I'm now behind the 8ball timewise.



      Paul
      -- 

      To subscribe to the ITS mailing list, go to <A HREF="http://lists.otn.edu.au/mailman/listinfo/qsite-its.">http://lists.otn.edu.au/mailman/listinfo/qsite-its.</A>

      To email the list, use  <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">qsite-its at lists.otn.edu.au</A> 


      QISTE Moodle - <A HREF="http://qsite.netspot.com.au/login/index.php">http://qsite.netspot.com.au/login/index.php</A>
      An ITS repository for sharing of resources.  Contact me for the enroll key.


      <A HREF="http://rightintoit.com/wordpress/">http://rightintoit.com/wordpress/</A> A blog examining how new technologies can assist in the classroom









      _______________________________________________
      Opensim-users mailing list
      <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
      <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>




    _______________________________________________
    Opensim-users mailing list
    <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
    <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>






  -- 

  To subscribe to the ITS mailing list, go to <A HREF="http://lists.otn.edu.au/mailman/listinfo/qsite-its.">http://lists.otn.edu.au/mailman/listinfo/qsite-its.</A>

  To email the list, use  <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">qsite-its at lists.otn.edu.au</A> 


  QISTE Moodle - <A HREF="http://qsite.netspot.com.au/login/index.php">http://qsite.netspot.com.au/login/index.php</A>
  An ITS repository for sharing of resources.  Contact me for the enroll key.


  <A HREF="http://rightintoit.com/wordpress/">http://rightintoit.com/wordpress/</A> A blog examining how new technologies can assist in the classroom









------------------------------------------------------------------------------


  _______________________________________________
  Opensim-users mailing list
  <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
  <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-users/attachments/20130518/63cf4885/attachment.html">https://lists.berlios.de/pipermail/opensim-users/attachments/20130518/63cf4885/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012255.html">[Opensim-users] Waiting for Region Handshake
</A></li>
	<LI>Next message: <A HREF="012269.html">[Opensim-users] Waiting for Region Handshake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12257">[ date ]</a>
              <a href="thread.html#12257">[ thread ]</a>
              <a href="subject.html#12257">[ subject ]</a>
              <a href="author.html#12257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
