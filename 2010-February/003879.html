<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] MySQL on seperate server?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20MySQL%20on%20seperate%20server%3F&In-Reply-To=%3C1266537569877-4595228.post%40n2.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003878.html">
   <LINK REL="Next"  HREF="003882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] MySQL on seperate server?</H1>
    <B>Master_Mirage</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20MySQL%20on%20seperate%20server%3F&In-Reply-To=%3C1266537569877-4595228.post%40n2.nabble.com%3E"
       TITLE="[Opensim-users] MySQL on seperate server?">mirage123 at verizon.net
       </A><BR>
    <I>Fri Feb 19 00:59:29 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003878.html">[Opensim-users] MySQL on seperate server?
</A></li>
        <LI>Next message: <A HREF="003882.html">[Opensim-users] MySQL on seperate server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3879">[ date ]</a>
              <a href="thread.html#3879">[ thread ]</a>
              <a href="subject.html#3879">[ subject ]</a>
              <a href="author.html#3879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I totaly agree and that is the real problem. No matter how good it
is,eventualy it hits a brick wall and at best we can do is by more time and
hope other solutions can be found.

In this case 'running mysql on a sep server?' is realy a good question and
the best way to say it is &quot;When will i have to run it like that?'.  Its not
a question of if one should do it.

Perforamce will be the last of ppl worries when that glass gets full!

For me it wasent something i wanted to do, just something i had no choice to
do. The problem will allways be there and i feel knowing that 1st, then
planning on it ahaid of time is for now the best way to look at it.

I think thats why this is an excellent question to ask! 
:<i>-)
</I>

Karen Palen wrote:
&gt;<i> 
</I>&gt;<i> I have to wonder if there is not some MySQL problem that is contributing
</I>&gt;<i> to this.
</I>&gt;<i> 
</I>&gt;<i> Bob Wellman&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">bob.wellman at hotmail.co.uk</A>&gt; and I had an extended discussion
</I>&gt;<i> about this a couple of weeks ago. 
</I>&gt;<i> 
</I>&gt;<i> We both have observed that the OpenSim database never deletes database
</I>&gt;<i> entries for assets! In addition there are numerous duplicate entries,
</I>&gt;<i> especially
</I>&gt;<i> 
</I>&gt;<i> Bob has actually done something about this and has written some PHP based
</I>&gt;<i> MySQL scripts to remove duplicate entries and unused entries. Right now he
</I>&gt;<i> is upgrading his scripts to make them somewhat portable and I anticipate
</I>&gt;<i> testing them on my private region in the near future.
</I>&gt;<i> 
</I>&gt;<i> My database grew to over 1.2Gb for a single region! I used a very crude
</I>&gt;<i> way to fix the problem, I dumped all of my inventory to an IAR file, then
</I>&gt;<i> dumped the region data to an OAR file.
</I>&gt;<i> 
</I>&gt;<i> Now with 5 regions the database occupies less than 200Mb!
</I>&gt;<i> 
</I>&gt;<i> Obviously if there is that much difference in the database size then you
</I>&gt;<i> are going to see a performance difference in the database!
</I>&gt;<i> 
</I>&gt;<i> This has not been a problem with OpenSim so far, probably because very few
</I>&gt;<i> users have kept a database for more than a month or so. Our feeling is
</I>&gt;<i> that this will soon become a problem since OPenSim is now stable enough to
</I>&gt;<i> get some serious use!
</I>&gt;<i> 
</I>&gt;<i> We will be posting updates here and on the Wiki as soon as there is
</I>&gt;<i> anything to share!
</I>&gt;<i> 
</I>&gt;<i> Karen
</I>&gt;<i> 
</I>&gt;<i> --- On Thu, 2/18/10, Master_Mirage &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">mirage123 at verizon.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> From: Master_Mirage &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">mirage123 at verizon.net</A>&gt;
</I>&gt;&gt;<i> Subject: Re: [Opensim-users] MySQL on seperate server?
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> Date: Thursday, February 18, 2010, 9:56 AM
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I arrive late, as usual :-)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> When a region has around 12000 primitives, with a db server
</I>&gt;&gt;<i> on the same
</I>&gt;&gt;<i> machine you will have hell on earth or something like
</I>&gt;&gt;<i> that.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Boot up time is around 10 minutes and is impossible to do
</I>&gt;&gt;<i> anything but using
</I>&gt;&gt;<i> zoom. Impossible to move.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I have tested this with 3 machines (4Gb ram, 500Gb hd RAID,
</I>&gt;&gt;<i> Intel Core Duo
</I>&gt;&gt;<i> 1,73, Intel Core duo 2,3 and amd64) running windows XP,
</I>&gt;&gt;<i> Vista and Windows
</I>&gt;&gt;<i> 7-64 bits.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I was using grid mode (grid server on separate computer...
</I>&gt;&gt;<i> no ROBUST or
</I>&gt;&gt;<i> UGAIM, it uses a PHP ugaim system).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Separating Mysql to another machine on the same local
</I>&gt;&gt;<i> network (100 Mbps nc)
</I>&gt;&gt;<i> I could move, build, and even another avatar could enter.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Exporting db and running it on separate server with Linux
</I>&gt;&gt;<i> (ubuntu server
</I>&gt;&gt;<i> 9.04) I could fill the region with 5000 more prims and 2
</I>&gt;&gt;<i> avatars could work
</I>&gt;&gt;<i> smooth.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Running opensim on Linux (amd64, 4gb ram, ubuntu server
</I>&gt;&gt;<i> 9.04 64 bits) and db
</I>&gt;&gt;<i> on separate linux server 2 avatars could work smoothly and
</I>&gt;&gt;<i> filling the
</I>&gt;&gt;<i> region with 25000 prims (no simple prims, but different
</I>&gt;&gt;<i> sizes, texturized
</I>&gt;&gt;<i> and scripted).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Anyway, that were my &quot;home&quot; experiences... My conclusion:
</I>&gt;&gt;<i> separate db, don't
</I>&gt;&gt;<i> use windows.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Greetings
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Well 1st a bit on that. going back in time 1.5 years now
</I>&gt;&gt;<i> running
</I>&gt;&gt;<i> opensimulator, At 1st it dident really matter as there
</I>&gt;&gt;<i> wasent enough of a DB
</I>&gt;&gt;<i> to become a problem with YET. I had to take in account
</I>&gt;&gt;<i> baised on (no was
</I>&gt;&gt;<i> really shure about anything) what it was i wanted someday.
</I>&gt;&gt;<i> I knew that both
</I>&gt;&gt;<i> linux and win were used but seemed a hot argument and still
</I>&gt;&gt;<i> no one really
</I>&gt;&gt;<i> had an answer for whats best for running a grid on. I
</I>&gt;&gt;<i> Decided&#160; that the only
</I>&gt;&gt;<i> true way to know is run both and see.
</I>&gt;&gt;<i> So i purchaced 5 quad core servers all the same equip. ram
</I>&gt;&gt;<i> ect. To me this
</I>&gt;&gt;<i> would be enough putter power to find out with. Remeber that
</I>&gt;&gt;<i> opensimulator is
</I>&gt;&gt;<i> still alpha and was more so then.
</I>&gt;&gt;<i> I begain testing the MANY ways a grid can be formed and the
</I>&gt;&gt;<i> equip. made it a
</I>&gt;&gt;<i> bit easyer to see it Side By Side in real time. 
</I>&gt;&gt;<i> It dident take long to see that mysql would grow in
</I>&gt;&gt;<i> perpotion to the db size
</I>&gt;&gt;<i> as to its own demands.
</I>&gt;&gt;<i> At 1st it was faster to have mysql local to the services
</I>&gt;&gt;<i> and was for
</I>&gt;&gt;<i> sometime. Later it started to glom onto the same resources
</I>&gt;&gt;<i> the instances
</I>&gt;&gt;<i> needed and begain to get verry slow. At that point assets
</I>&gt;&gt;<i> were around 3-4
</I>&gt;&gt;<i> gigs. Seeing the problem i knew i had to do something as
</I>&gt;&gt;<i> the longer i waited
</I>&gt;&gt;<i> the worse it would get.
</I>&gt;&gt;<i> Moved Mysql to another box knowing latency would be there.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> That indeed delt with the 'tipping point' it reached. It
</I>&gt;&gt;<i> wasent hard to see
</I>&gt;&gt;<i> for my selph what happend.
</I>&gt;&gt;<i> That worked well for sometime but it begain to develop its
</I>&gt;&gt;<i> own problems due
</I>&gt;&gt;<i> to the unknowen) as to its settings. Had to readj the MySql
</I>&gt;&gt;<i> settings 4 times
</I>&gt;&gt;<i> and 2 total rebuilds due to the never ending growth of
</I>&gt;&gt;<i> assest data. When it
</I>&gt;&gt;<i> hit around 10-11gigs assests a whole new set of problems
</I>&gt;&gt;<i> showed up. The big
</I>&gt;&gt;<i> one is all that data has to be maintained and backed up.
</I>&gt;&gt;<i> This took most of a
</I>&gt;&gt;<i> day of downtime as why its doing all that its locking the
</I>&gt;&gt;<i> tables and
</I>&gt;&gt;<i> Opensimulator freeks. Thats not good and not only is the
</I>&gt;&gt;<i> grid offline but
</I>&gt;&gt;<i> the amout of time by me to work on it became excessive. As
</I>&gt;&gt;<i> orginaly i had
</I>&gt;&gt;<i> bee wise and bought enough computers i spent a good while
</I>&gt;&gt;<i> learing about
</I>&gt;&gt;<i> Mysql replication. This does solve some of the problems as
</I>&gt;&gt;<i> it lets me switch
</I>&gt;&gt;<i> the services to use the other Mysql and allows maint to
</I>&gt;&gt;<i> happen with little
</I>&gt;&gt;<i> effort.
</I>&gt;&gt;<i> Only the one maint is beeing done on has tables locked not
</I>&gt;&gt;<i> both.
</I>&gt;&gt;<i> Moveing to current time. 23+gigs assests and at my goal of
</I>&gt;&gt;<i> 100 regions
</I>&gt;&gt;<i> (un-told amout of prims and scripts whatever) it was a
</I>&gt;&gt;<i> verry good plan. 
</I>&gt;&gt;<i> Is it as fast as it could be? Nope! The problem will
</I>&gt;&gt;<i> allways be there. Is it
</I>&gt;&gt;<i> scaleable? You betcha!.
</I>&gt;&gt;<i> I guess my point is Depends on what you expect your grid
</I>&gt;&gt;<i> tobe and planning
</I>&gt;&gt;<i> assuming worse case as best as you can. 
</I>&gt;&gt;<i> Opensimulator is made to be as felxable as it needs tobe
</I>&gt;&gt;<i> and what oper.
</I>&gt;&gt;<i> system i find is a push. Both do an excellent job and Both
</I>&gt;&gt;<i> can and do show
</I>&gt;&gt;<i> the same performance when set up properly. 
</I>&gt;&gt;<i> For me the differances realy boiled down to what was more
</I>&gt;&gt;<i> comfortable for me
</I>&gt;&gt;<i> to maintain. In my case im dealing with many servers acting
</I>&gt;&gt;<i> as one. If you
</I>&gt;&gt;<i> ask me whats better ill say none.
</I>&gt;&gt;<i> My best suggestion for ppl starting out is expect nothing
</I>&gt;&gt;<i> and be really
</I>&gt;&gt;<i> happy when it all works better than you though 
</I>&gt;&gt;<i> :-)
</I>&gt;&gt;<i> There will allways be argument and theroy and thats a good
</I>&gt;&gt;<i> thing but there
</I>&gt;&gt;<i> is no better judge than you and what you can see in
</I>&gt;&gt;<i> realtime.
</I>&gt;&gt;<i> :working:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> View this message in context:
</I>&gt;&gt;<i> <A HREF="http://n2.nabble.com/MySQL-on-seperate-server-tp4575740p4592890.html">http://n2.nabble.com/MySQL-on-seperate-server-tp4575740p4592890.html</A>
</I>&gt;&gt;<i> Sent from the opensim-users mailing list archive at
</I>&gt;&gt;<i> Nabble.com.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>       
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context: <A HREF="http://n2.nabble.com/MySQL-on-seperate-server-tp4575740p4595228.html">http://n2.nabble.com/MySQL-on-seperate-server-tp4575740p4595228.html</A>
Sent from the opensim-users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003878.html">[Opensim-users] MySQL on seperate server?
</A></li>
	<LI>Next message: <A HREF="003882.html">[Opensim-users] MySQL on seperate server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3879">[ date ]</a>
              <a href="thread.html#3879">[ thread ]</a>
              <a href="subject.html#3879">[ subject ]</a>
              <a href="author.html#3879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
