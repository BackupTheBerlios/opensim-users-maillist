<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Out of memory exception on logout r/17830
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2012-January/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Out%20of%20memory%20exception%20on%20logout%20r/17830&In-Reply-To=%3C4F16D987.9040608%40cox.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009109.html">
   <LINK REL="Next"  HREF="009092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Out of memory exception on logout r/17830</H1>
    <B>Chris</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Out%20of%20memory%20exception%20on%20logout%20r/17830&In-Reply-To=%3C4F16D987.9040608%40cox.net%3E"
       TITLE="[Opensim-users] Out of memory exception on logout r/17830">mewtwo0641 at cox.net
       </A><BR>
    <I>Wed Jan 18 15:39:03 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009109.html">[Opensim-users] Sensors are not detecting NPC avatars on git r/17830
</A></li>
        <LI>Next message: <A HREF="009092.html">[Opensim-users] Out of memory exception on logout r/17830
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9083">[ date ]</a>
              <a href="thread.html#9083">[ thread ]</a>
              <a href="subject.html#9083">[ subject ]</a>
              <a href="author.html#9083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

On git r/17830, I am getting an out of memory exception when ever I try 
to detach a scripted object or on logout. I also have to tell the viewer 
to detach the attachments sometimes as many as 5 times in a row before 
it will actually detach (Seems to affect non scripted objects as well). 
I've tried deleting the contents of my ScriptsEngine folder as well as 
my assetcache folder to no avail. Sometimes the exception triggers and 
sometimes it doesn't (about every other detach attempt or logout attempt).


*Exceptions:
On log out:
==========
*
2012-01-18 07:47:12,281 ERROR - 
OpenSim.Region.ClientStack.LindenUDP.LLClientView [LLCLIENTVIEW]: Caught 
exception while processing OpenMetaverse.Packets.LogoutRequestPacket for 
mewtwo0641 Alito, Exception of type 'System.OutOfMemoryException' was 
thrown.    at System.String.ToCharArray()
    at System.Text.Encoding.GetBytes(String s)
    at OpenMetaverse.Utils.StringToBytes(String str)
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.UpdateKnownItem(IScenePresence 
sp, SceneObjectGroup grp) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
486
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.SaveChangedAttachments(IScenePresence 
sp) in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
164
    at OpenSim.Region.Framework.Scenes.Scene.RemoveClient(UUID agentID, 
Boolean closeChildAgents) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\Framework\Scenes\Scene.cs:line 3122
    at OpenSim.Region.ClientStack.LindenUDP.LLClientView.Close() in 
c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
517
    at 
OpenSim.Region.ClientStack.LindenUDP.LLUDPServer.RemoveClient(LLUDPClient udpClient) 
in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLUDPServer.cs:line 
1033
    at 
OpenSim.Region.ClientStack.LindenUDP.LLUDPServer.LogoutHandler(IClientAPI client) 
in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLUDPServer.cs:line 
1340
    at System.Action`1.Invoke(T obj)
    at 
OpenSim.Region.ClientStack.LindenUDP.LLClientView.Logout(IClientAPI 
client) in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
11217
    at 
OpenSim.Region.ClientStack.LindenUDP.LLClientView.HandleLogout(IClientAPI client, 
Packet packet) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
11201
    at 
OpenSim.Region.ClientStack.LindenUDP.LLClientView.ProcessSpecificPacketAsync(Object 
state) in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
683

*On manual attachment detach:
==========================*

2012-01-18 07:53:04,156 ERROR - 
OpenSim.Region.ClientStack.LindenUDP.LLClientView [LLCLIENTVIEW]: Caught 
exception while processing OpenMetaverse.Packets.ObjectDetachPacket for 
mewtwo0641 Alito, Exception of type 'System.OutOfMemoryException' was 
thrown.    at System.String.Concat(String str0, String str1)
    at OpenMetaverse.Utils.StringToBytes(String str)
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.UpdateKnownItem(IScenePresence 
sp, SceneObjectGroup grp) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
486
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.DetachSingleAttachmentToInvInternal(IScenePresence 
sp, UUID itemID) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
699
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.DetachSingleAttachmentToInv(IScenePresence 
sp, UUID itemID) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
401
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.Client_OnObjectDetach(UInt32 
objectLocalID, IClientAPI remoteClient) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
917
    at 
OpenSim.Region.ClientStack.LindenUDP.LLClientView.HandleObjectDetach(IClientAPI 
sender, Packet Pack) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
6170
    at 
OpenSim.Region.ClientStack.LindenUDP.LLClientView.ProcessSpecificPacketAsync(Object 
state) in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\ClientStack\Linden\UDP\LLClientView.cs:line 
683

*
If I log in after OoM Exception is thrown:
==================================*

2012-01-18 08:02:35,687 ERROR - 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule 
[ATTACHMENTS MODULE]: Unable to rez attachment: Exception of type 
'System.OutOfMemoryException' was thrown.   at 
System.String.CreateStringFromEncoding(Byte* bytes, Int32 byteLength, 
Encoding encoding)
    at System.Text.UTF8Encoding.GetString(Byte[] bytes, Int32 index, 
Int32 count)
    at OpenMetaverse.Utils.BytesToString(Byte[] bytes)
    at 
OpenSim.Region.CoreModules.Framework.InventoryAccess.BasicInventoryAccessModule.RezObject(IClientAPI 
remoteClient, InventoryItemBase item, UUID assetID, Vector3 RayEnd, 
Vector3 RayStart, UUID RayTargetID, Byte BypassRayCast, Boolean 
RayEndIsIntersection, Boolean RezSelected, Boolean RemoveItem, UUID 
fromTaskID, Boolean attachment) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Framework\InventoryAccess\InventoryAccessModule.cs:line 
725
    at 
OpenSim.Region.CoreModules.Framework.InventoryAccess.BasicInventoryAccessModule.RezObject(IClientAPI 
remoteClient, UUID itemID, Vector3 RayEnd, Vector3 RayStart, UUID 
RayTargetID, Byte BypassRayCast, Boolean RayEndIsIntersection, Boolean 
RezSelected, Boolean RemoveItem, UUID fromTaskID, Boolean attachment) in 
c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Framework\InventoryAccess\InventoryAccessModule.cs:line 
692
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.RezSingleAttachmentFromInventoryInternal(IScenePresence 
sp, UUID itemID, UUID assetID, UInt32 attachmentPt) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
720
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.RezSingleAttachmentFromInventory(IScenePresence 
sp, UUID itemID, UInt32 AttachmentPt) in c:\Documents and 
Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
308
    at 
OpenSim.Region.CoreModules.Avatar.Attachments.AttachmentsModule.RezAttachments(IScenePresence 
sp) in c:\Documents and Settings\admin\Desktop\opensim-e7619f7 
r17830\opensim-e7619f7\OpenSim\Region\CoreModules\Avatar\Attachments\AttachmentsModule.cs:line 
142

-- 
OpenSim: 9 Region Standalone on 0.7.3 Dev
Physics: Open Dynamics Engine
OS: Windows XP 32 Bit
CPU: AMD Phenom II X4 840 3.2 GHz
Memory: 3 GB DDR3
Database: MySQL 5.1.11

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-users/attachments/20120118/1eee7973/attachment.html">https://lists.berlios.de/pipermail/opensim-users/attachments/20120118/1eee7973/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009109.html">[Opensim-users] Sensors are not detecting NPC avatars on git r/17830
</A></li>
	<LI>Next message: <A HREF="009092.html">[Opensim-users] Out of memory exception on logout r/17830
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9083">[ date ]</a>
              <a href="thread.html#9083">[ thread ]</a>
              <a href="subject.html#9083">[ subject ]</a>
              <a href="author.html#9083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
