<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2013-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Hypergrid%20issues%20after%20installing%20Nginx%20Reverse%0A%09Proxy&In-Reply-To=%3CCAN87VwjrdQhNGow%3DvKy5jAR9nzbpEx%3Dxmy56OSYQUz%3DwBskk%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012817.html">
   <LINK REL="Next"  HREF="012819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy</H1>
    <B>Timothy Rogers</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Hypergrid%20issues%20after%20installing%20Nginx%20Reverse%0A%09Proxy&In-Reply-To=%3CCAN87VwjrdQhNGow%3DvKy5jAR9nzbpEx%3Dxmy56OSYQUz%3DwBskk%2BQ%40mail.gmail.com%3E"
       TITLE="[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy">timothy.f.rogers at gmail.com
       </A><BR>
    <I>Wed Nov  6 23:49:24 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="012817.html">[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy
</A></li>
        <LI>Next message: <A HREF="012819.html">[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12818">[ date ]</a>
              <a href="thread.html#12818">[ thread ]</a>
              <a href="subject.html#12818">[ subject ]</a>
              <a href="author.html#12818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Michael, if I ever decide to use NiGNX or anyone else that is
an awesome article! Here is the one for Apache for people using Apache
setup: <A HREF="http://httpd.apache.org/docs/2.2/mod/mod_proxy.html">http://httpd.apache.org/docs/2.2/mod/mod_proxy.html</A>

On Wed, Nov 6, 2013 at 5:44 PM, Michael Emory Cerquoni
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nebadon2025 at gmail.com</A>&gt; wrote:
&gt;<i> Teravus posted this here 3-4 weeks ago it may help you out &gt;
</I>&gt;<i> <A HREF="http://www.networkinghowtos.com/howto/set-the-x-forwarded-for-header-on-a-nginx-reverse-proxy-setup/">http://www.networkinghowtos.com/howto/set-the-x-forwarded-for-header-on-a-nginx-reverse-proxy-setup/</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Wed, Nov 6, 2013 at 5:42 PM, Timothy Rogers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">timothy.f.rogers at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One issue I ran into when I was setting up Apache Reverse Proxy, I
</I>&gt;&gt;<i> noticed I never told it to forward headers, that may be one of your
</I>&gt;&gt;<i> issues if it is not forwarding the proper header information. I am not
</I>&gt;&gt;<i> to sure how NiGNX handles headers through reverse proxy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wed, Nov 6, 2013 at 5:18 PM,  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensiminfo at virtualrealmsgrid.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt; Hi I setup a Nginx Reverse Proxy on my grid.  Now I no one can hypergrid
</I>&gt;&gt;<i> &gt; in
</I>&gt;&gt;<i> &gt; or out.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;  I did check connectivity thru the Proxy server and it works. I can log
</I>&gt;&gt;<i> &gt; in
</I>&gt;&gt;<i> &gt; via the new login Uri: login.virtualrealmsgrid.com and I can even log in
</I>&gt;&gt;<i> &gt; with the new hypergrid address hg.virtualrealmsgrid.com  as the login
</I>&gt;&gt;<i> &gt; url..
</I>&gt;&gt;<i> &gt; SO I know the proxy server is working.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Trying to hypergrid in to the grid from another grid I get this result.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; If I log into Osgrid or Craftworld I search for hg.virtualrealmsgrid.com
</I>&gt;&gt;<i> &gt; in
</I>&gt;&gt;<i> &gt; the map they find the grid.   But when I try to teleport to I get
</I>&gt;&gt;<i> &gt; Problem
</I>&gt;&gt;<i> &gt; Destination.  I look at my robust log and there is nothing about
</I>&gt;&gt;<i> &gt; hypergrid
</I>&gt;&gt;<i> &gt; in from either grid.
</I>&gt;&gt;<i> &gt; If I open my port 8002 on my router I see an attempt at hypergrid but
</I>&gt;&gt;<i> &gt; the
</I>&gt;&gt;<i> &gt; error I get is:
</I>&gt;&gt;<i> &gt; 2013-11-06 04:01:48,202 DEBUG -
</I>&gt;&gt;<i> &gt; OpenSim.Services.HypergridService.GatekeeperService [GATEKEEPER
</I>&gt;&gt;<i> &gt; SERVICE]:
</I>&gt;&gt;<i> &gt; Verifying <A HREF="http://virtualrealmsgrid.com:8002">http://virtualrealmsgrid.com:8002</A> against
</I>&gt;&gt;<i> &gt; <A HREF="http://hg.virtualrealmsgrid.com">http://hg.virtualrealmsgrid.com</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; virtualrealmsgrid.com:8002 use to be the Login URI and Hypergate info..
</I>&gt;&gt;<i> &gt; with the Proxy it is:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;  login URI = &quot;login.virtualrealmsgrid.com&quot;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; hypergrid info for the grid is:
</I>&gt;&gt;<i> &gt; HomeURI = &quot;<A HREF="http://hg.virtualrealmsgrid.com">http://hg.virtualrealmsgrid.com</A>&quot;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; GatekeeperURI = &quot;<A HREF="http://hg.virtualrealmsgrid.com">http://hg.virtualrealmsgrid.com</A>&quot;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; When I log in to the grid as a local user I get some errors in the
</I>&gt;&gt;<i> &gt; OpenSim.log when I try to hypergrid. these are:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; 2013-11-06 16:25:51,857 DEBUG - OpenSim.Framework.WebUtil [WEB UTIL]:
</I>&gt;&gt;<i> &gt; ServiceOSD request 1506
</I>&gt;&gt;<i> &gt; <A HREF="http://184.70.53.242/homeagent/a887910d-072c-42f2-92ae-17e69f65d118/">http://184.70.53.242/homeagent/a887910d-072c-42f2-92ae-17e69f65d118/</A>
</I>&gt;&gt;<i> &gt; POST
</I>&gt;&gt;<i> &gt; FAILED: [NotFound] Not Found
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; 2013-11-06 16:25:51,864 DEBUG - OpenSim.Framework.WebUtil [WEB UTIL]:
</I>&gt;&gt;<i> &gt; ServiceOSD request 1507
</I>&gt;&gt;<i> &gt; <A HREF="http://184.70.53.242/homeagent/a887910d-072c-42f2-92ae-17e69f65d118/">http://184.70.53.242/homeagent/a887910d-072c-42f2-92ae-17e69f65d118/</A>
</I>&gt;&gt;<i> &gt; POST
</I>&gt;&gt;<i> &gt; FAILED: [NotFound] Not Found
</I>&gt;&gt;<i> &gt; 2013-11-06 16:25:51,866 WARN -
</I>&gt;&gt;<i> &gt; OpenSim.Services.Connectors.Simulation.SimulationServiceConnector
</I>&gt;&gt;<i> &gt; [REMOTE
</I>&gt;&gt;<i> &gt; SIMULATION CONNECTOR]: Failed to create agent Todd Davis at remote
</I>&gt;&gt;<i> &gt; simulator
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; 2013-11-06 16:25:51,868 DEBUG -
</I>&gt;&gt;<i> &gt; OpenSim.Region.CoreModules.Framework.EntityTransfer.EntityTransferModule
</I>&gt;&gt;<i> &gt; [ENTITY TRANSFER MODULE]: Teleport of Todd Davis from Mezzo Realm to
</I>&gt;&gt;<i> &gt; Lbsa
</I>&gt;&gt;<i> &gt; Plaza was refused because Service request failed: [NotFound] Not Found
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Also I get one error when I log off the grid as a user in the
</I>&gt;&gt;<i> &gt; OpenSim.log.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; 2013-11-06 16:26:24,869 DEBUG -
</I>&gt;&gt;<i> &gt; OpenSim.Services.Connectors.Hypergrid.UserAgentServiceConnector [USER
</I>&gt;&gt;<i> &gt; AGENT
</I>&gt;&gt;<i> &gt; CONNECTOR]: Unable to contact remote server <A HREF="http://184.70.53.242/">http://184.70.53.242/</A> for
</I>&gt;&gt;<i> &gt; GetBoolResponse
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The setup for the grid is the only the hypergrid server information is
</I>&gt;&gt;<i> &gt; exposed to the internet ie: all the 8002 connectors pass through the
</I>&gt;&gt;<i> &gt; proxy
</I>&gt;&gt;<i> &gt; and the 8003 connectors are on a internal network ip system..  Save I
</I>&gt;&gt;<i> &gt; have a
</I>&gt;&gt;<i> &gt; SRAS Asset server running that is on 8004 and that is exposed to the
</I>&gt;&gt;<i> &gt; internet also (that is another question but it needs to wait).
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I have checked and rechecked to make sure all references to old
</I>&gt;&gt;<i> &gt; virtualrealmsgrid.com:8002 are changed to  new proxy URIs..   I have
</I>&gt;&gt;<i> &gt; even
</I>&gt;&gt;<i> &gt; gone through all my databases to make sure nothing shows
</I>&gt;&gt;<i> &gt; virtualrealmsgrid:8002
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So the long and short of this is I think there is something not pointing
</I>&gt;&gt;<i> &gt; properly in either the Robust.HG.ini, OpenSim.ini or GridCommon.ini not
</I>&gt;&gt;<i> &gt; talking to the hypergrid connectors..
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Thanks for the help in advance..
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Todd
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Opensim-users mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Michael Emory Cerquoni
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012817.html">[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy
</A></li>
	<LI>Next message: <A HREF="012819.html">[Opensim-users] Hypergrid issues after installing Nginx Reverse	Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12818">[ date ]</a>
              <a href="thread.html#12818">[ thread ]</a>
              <a href="subject.html#12818">[ subject ]</a>
              <a href="author.html#12818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
