<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Intermittent crashing -	System.OutofMemoryException
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2012-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Intermittent%20crashing%20-%0A%09System.OutofMemoryException&In-Reply-To=%3CCAOaG_2bNE_GoSSG2fwS4hmJ9sKKpmD_%3Djhud5izFv_9%3DaQa36g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009359.html">
   <LINK REL="Next"  HREF="009362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Intermittent crashing -	System.OutofMemoryException</H1>
    <B>James Stallings II</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Intermittent%20crashing%20-%0A%09System.OutofMemoryException&In-Reply-To=%3CCAOaG_2bNE_GoSSG2fwS4hmJ9sKKpmD_%3Djhud5izFv_9%3DaQa36g%40mail.gmail.com%3E"
       TITLE="[Opensim-users] Intermittent crashing -	System.OutofMemoryException">james.stallings at gmail.com
       </A><BR>
    <I>Tue Feb 14 13:29:06 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="009359.html">[Opensim-users] Intermittent crashing -	System.OutofMemoryException
</A></li>
        <LI>Next message: <A HREF="009362.html">[Opensim-users] Intermittent crashing -	System.OutofMemoryException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9361">[ date ]</a>
              <a href="thread.html#9361">[ thread ]</a>
              <a href="subject.html#9361">[ subject ]</a>
              <a href="author.html#9361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Regardless the amount of RAM on your system, the .net runtime uses a memory
model of a specific size (2 GB) and cannot address more than that except
under special circumstances.

There is a hack around, involving the use of a Visual Studio C++ utility to
make a .net binary 'large memory aware', which will allow it to address 4
GB, but then only on operating systems that can address &gt;2 GB (e.g., not 32
bit operating systems).

Note that such measures will only help if the memory exhaustion is being
caused by the amount/complexity of content. If the problem is truly a
memory leak, this workaround will only prolong the inevitable, as it will
simply provide more memory for the leaking.

I saw this problem *very* briefly in the 0.7.3 series about a month ago. I
never did have any indication of what was causing it, and it occurred day
over day, without significant changes to the content. It went away just as
fast as it came.



FYI this is on a 25 region megaregion with &gt;50k prims and at least several
rather complex scripts in play.


Cheers
James/Hiro


On Mon, Feb 13, 2012 at 8:39 PM, Gary Banham &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">banham1 at telus.net</A>&gt; wrote:

&gt;<i> Fleep I&#8217;m running into exactly the same problem I check the flotsam cache
</I>&gt;<i> to make sure I wasn&#8217;t using memory ****
</I>&gt;<i>
</I>&gt;<i> My server runs windows seven but has the same amount of memory  I have
</I>&gt;<i> about 8 regions on the server some with quite a few scripts****
</I>&gt;<i>
</I>&gt;<i> I rolled back the instance to 7.1.1 to see what would happen and it worked
</I>&gt;<i> fine there must be something different in the way 7.2 release uses the
</I>&gt;<i> memory****
</I>&gt;<i>
</I>&gt;<i> I&#8217;m in the process of distributing the regions over a number of 7.2
</I>&gt;<i> instances I&#8217;m not sure if that&#8217;s going to cause other problems****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> TC****
</I>&gt;<i>
</I>&gt;<i> Gary****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> *From:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users-bounces at lists.berlios.de</A> [mailto:
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users-bounces at lists.berlios.de</A>] *On Behalf Of *Fleep Tuque
</I>&gt;<i> *Sent:* February-13-12 11:06 AM
</I>&gt;<i> *To:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A>
</I>&gt;<i> *Subject:* [Opensim-users] Intermittent crashing -
</I>&gt;<i> System.OutofMemoryException****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Hi all,****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Our campus opensim system (running version 0.7.2 Release in grid mode)
</I>&gt;<i> seems to intermittently be crashing the last week or so and I can't figure
</I>&gt;<i> out why or how to reproduce it.  An out of memory exception doesn't make
</I>&gt;<i> sense to me, the server has 24GB RAM and has very light load since we're
</I>&gt;<i> still in pilot/testing phase.  No more than 5 or 6 users concurrent, only a
</I>&gt;<i> few sims with much content..  ****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Does this error mean anything to anyone?****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> 012-02-11 18:18:33,738 ERROR - OpenSim.Application [APPLICATION]: ****
</I>&gt;<i>
</I>&gt;<i> APPLICATION EXCEPTION DETECTED: System.UnhandledExceptionEventArgs****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Exception: System.OutOfMemoryException: Exception of type
</I>&gt;<i> 'System.OutOfMemoryException' was thrown.****
</I>&gt;<i>
</I>&gt;<i>    at System.Threading.Thread.StartInternal(IPrincipal principal,
</I>&gt;<i> StackCrawlMark&amp; stackMark)****
</I>&gt;<i>
</I>&gt;<i>    at System.Threading.Thread.Start()****
</I>&gt;<i>
</I>&gt;<i>    at Amib.Threading.SmartThreadPool.StartThreads(Int32 threadsCount)****
</I>&gt;<i>
</I>&gt;<i>    at Amib.Threading.SmartThreadPool.Enqueue(WorkItem workItem, Boolean
</I>&gt;<i> incrementWorkItems)****
</I>&gt;<i>
</I>&gt;<i>    at Amib.Threading.SmartThreadPool.QueueWorkItem(WorkItemCallback
</I>&gt;<i> callback, Object state)****
</I>&gt;<i>
</I>&gt;<i>    at OpenSim.Framework.Util.FireAndForget(WaitCallback callback, Object
</I>&gt;<i> obj)****
</I>&gt;<i>
</I>&gt;<i>    at
</I>&gt;<i> OpenSim.Region.ClientStack.LindenUDP.LLUDPServer.PacketReceived(UDPPacketBuffer
</I>&gt;<i> buffer)****
</I>&gt;<i>
</I>&gt;<i>    at OpenMetaverse.OpenSimUDPBase.AsyncEndReceive(IAsyncResult iar)****
</I>&gt;<i>
</I>&gt;<i>    at System.Net.LazyAsyncResult.Complete(IntPtr userToken)****
</I>&gt;<i>
</I>&gt;<i>    at System.Net.ContextAwareResult.CompleteCallback(Object state)****
</I>&gt;<i>
</I>&gt;<i>    at System.Threading.ExecutionContext.runTryCode(Object userData)****
</I>&gt;<i>
</I>&gt;<i>    at
</I>&gt;<i> System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode
</I>&gt;<i> code, CleanupCode backoutCode, Object userData)****
</I>&gt;<i>
</I>&gt;<i>    at System.Threading.ExecutionContext.RunInternal(ExecutionContext
</I>&gt;<i> executionContext, ContextCallback callback, Object state)****
</I>&gt;<i>
</I>&gt;<i>    at System.Threading.ExecutionContext.Run(ExecutionContext
</I>&gt;<i> executionContext, ContextCallback callback, Object state)****
</I>&gt;<i>
</I>&gt;<i>    at System.Net.ContextAwareResult.Complete(IntPtr userToken)****
</I>&gt;<i>
</I>&gt;<i>    at System.Net.LazyAsyncResult.ProtectedInvokeCallback(Object result,
</I>&gt;<i> IntPtr userToken)****
</I>&gt;<i>
</I>&gt;<i>    at
</I>&gt;<i> System.Net.Sockets.BaseOverlappedAsyncResult.CompletionPortCallback(UInt32
</I>&gt;<i> errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)****
</I>&gt;<i>
</I>&gt;<i>    at
</I>&gt;<i> System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32
</I>&gt;<i> errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Application is terminating: True****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Any pointers or advice appreciated!****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> - Chris/Fleep****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> Chris M. Collins (SL/OS: Fleep Tuque)****
</I>&gt;<i>
</I>&gt;<i> Center for Simulations &amp; Virtual Environments Research (UCSIM)****
</I>&gt;<i>
</I>&gt;<i> UCIT Instructional &amp; Research Computing****
</I>&gt;<i>
</I>&gt;<i> University of Cincinnati****
</I>&gt;<i>
</I>&gt;<i> 406A Zimmer Hall****
</I>&gt;<i>
</I>&gt;<i> 315 College Drive****
</I>&gt;<i>
</I>&gt;<i> PO BOX 210088****
</I>&gt;<i>
</I>&gt;<i> Cincinnati, OH 45221-0088****
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">chris.collins at uc.edu</A>****
</I>&gt;<i>
</I>&gt;<i> (513) 556-3018****
</I>&gt;<i>
</I>&gt;<i> ** **
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://ucsim.uc.edu****">http://ucsim.uc.edu****</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
===================================
<A HREF="http://simhost.com">http://simhost.com</A>
<A HREF="http://twitter.com/jstallings2">http://twitter.com/jstallings2</A>
<A HREF="http://www.linkedin.com/pub/5/770/a49">http://www.linkedin.com/pub/5/770/a49</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-users/attachments/20120214/e0c254cc/attachment.html">https://lists.berlios.de/pipermail/opensim-users/attachments/20120214/e0c254cc/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009359.html">[Opensim-users] Intermittent crashing -	System.OutofMemoryException
</A></li>
	<LI>Next message: <A HREF="009362.html">[Opensim-users] Intermittent crashing -	System.OutofMemoryException
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9361">[ date ]</a>
              <a href="thread.html#9361">[ thread ]</a>
              <a href="subject.html#9361">[ subject ]</a>
              <a href="author.html#9361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
