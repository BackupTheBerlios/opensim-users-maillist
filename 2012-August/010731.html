<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Region handshake does not complete
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2012-August/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Region%20handshake%20does%20not%20complete&In-Reply-To=%3C4D6E4AE5A8E940E6A02387EC96CEA44C%40GABPC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010729.html">
   <LINK REL="Next"  HREF="010735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Region handshake does not complete</H1>
    <B>Gary Beck</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Region%20handshake%20does%20not%20complete&In-Reply-To=%3C4D6E4AE5A8E940E6A02387EC96CEA44C%40GABPC%3E"
       TITLE="[Opensim-users] Region handshake does not complete">gab4gab at gmail.com
       </A><BR>
    <I>Mon Aug 13 04:51:07 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010729.html">[Opensim-users] Region handshake does not complete
</A></li>
        <LI>Next message: <A HREF="010735.html">[Opensim-users] Region handshake does not complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10731">[ date ]</a>
              <a href="thread.html#10731">[ thread ]</a>
              <a href="subject.html#10731">[ subject ]</a>
              <a href="author.html#10731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nick,
You need to un-check the 'Filter Internet NAT Redirection.'  When checked it will prevent the redirection you need.  The hosts file setting seem helpful in getting the TCP mode login process started when NAT loop back is not working.  This really isn't helpful because it when UDP kicks in the NAT loop back is still needed. Here is a link to a cisco discussion of the issue: <A HREF="http://homecommunity.cisco.com/t5/Wired-Routers/What-s-the-purpose-of-Filter-Internet-NAT-Redirection/td-p/63857">http://homecommunity.cisco.com/t5/Wired-Routers/What-s-the-purpose-of-Filter-Internet-NAT-Redirection/td-p/63857</A>  which contains this:
If your local systems send packets to the -public- (external) IP
and port of your internal servers, then if the filtering is turned
on then the device will deny those packets; when the filtering is
turned off, the device will re-address those packets and send them
back inwards. In this situation, the source of the connection is local
and the destination ends up being the local server, but the address
used by the local computer was the outside address instead of the
inside address.
- Gary Beck
  ----- Original Message ----- 
  From: Nicky Perian 
  To: Gary Beck ; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
  Sent: Sunday, August 12, 2012 3:37 PM
  Subject: Re: [Opensim-users] Region handshake does not complete


  e4200 settings that work for me.
  <A HREF="http://picpaste.com/NAT_Loop_Back_e4220-FGNLyJLJ.JPG">http://picpaste.com/NAT_Loop_Back_e4220-FGNLyJLJ.JPG</A>

  <A HREF="http://picpaste.com/NAT_loop_back_port_range_triggering-LZJD67rg.JPG">http://picpaste.com/NAT_loop_back_port_range_triggering-LZJD67rg.JPG</A>

  each hosts file 
  192.168.x.x my.dyndns.domain


  These might not be the best. I rely on each computer to be firewall protected and leave the routers open to prevent firewall fighting.


  Thank you for the responses. 






----------------------------------------------------------------------------
    From: Gary Beck &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">gab4gab at gmail.com</A>&gt;
    To: Nicky Perian &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nickyperian at yahoo.com</A>&gt;; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
    Sent: Sunday, August 12, 2012 11:55 AM
    Subject: Re: [Opensim-users] Region handshake does not complete



    The CISCO 'NAT loop back' item is 'Filter Internet NAT Redirection.'   I'm not at my usual location so I can't check how it's set on my e3200.  I think un-checking that option (the default) allows the redirection of your external IP back to your local LAN.  It's one of the firewall settings.

      ----- Original Message ----- 
      From: Nicky Perian 
      To: Gary Beck ; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
      Sent: Sunday, August 12, 2012 11:40 AM
      Subject: Re: [Opensim-users] Region handshake does not complete


      Thank you for the reply.
      I have a cisco e4200. It has settings for port forward, triggering, DMZ, and a means to place a gaming app at a specific priority.


      But,it has no mention of NAT loop back. I assume that NAT loop back is just another name for one of the other port handling features mentioned above.


      I have searched google and not found how to set NAT loop back. Actually, about the only mention to pop up is OS wiki.


      How is NAT loop back set up for any cisco router?


      Thanks,


      Nicky


        



------------------------------------------------------------------------
        From: Gary Beck &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">gab4gab at gmail.com</A>&gt;
        To: Nicky Perian &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nickyperian at yahoo.com</A>&gt;; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
        Sent: Saturday, August 11, 2012 9:30 PM
        Subject: Re: [Opensim-users] Region handshake does not complete



        Nicky,
        At handshake time the opensim server sends the viewer the resolved IP address of the region being connected to.  I'm assuming that would be your dyndns domain name + a port number.  However the server send the resolved address, not the domain name.  So the viewer will be getting the external IP + port number.  This can work if you local network router has NAT loopback enabled.  If not the viewer attempts to use the address and doesn't reach the server.  The host file settings would be effective if at handshake time the server sent domain names to be resolved but it doesn't.
        Hope this helps. 
        - Gary Beck
          ----- Original Message ----- 
          From: Nicky Perian 
          To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
          Sent: Saturday, August 11, 2012 9:57 PM
          Subject: [Opensim-users] Region handshake does not complete


          I am running a diva under win 7 64 bit. Same machine as several linux VMs. I want to connect each VM to the opensim sever. The VM's network cards are set to receive a DHCP ip from the router and that works. I can connect to any external grid (SL &amp; OS) from the VM's. I have a dyndns domain name assigned to the cable company external IP.


          The hosts file in the VM is set to server's lan ip and the dyndns domain name. Ping to the domain wraps to the server IP.


          At viewer start I receive the splash from the server.


          The login will not get past establishing the region handshake.


          Hints please.


          Nicky

----------------------------------------------------------------------
          _______________________________________________
          Opensim-users mailing list
          <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
          <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>





-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-users/attachments/20120812/f5915271/attachment-0001.html">https://lists.berlios.de/pipermail/opensim-users/attachments/20120812/f5915271/attachment-0001.html</A>&gt;
</PRE>





































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010729.html">[Opensim-users] Region handshake does not complete
</A></li>
	<LI>Next message: <A HREF="010735.html">[Opensim-users] Region handshake does not complete
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10731">[ date ]</a>
              <a href="thread.html#10731">[ thread ]</a>
              <a href="subject.html#10731">[ subject ]</a>
              <a href="author.html#10731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
