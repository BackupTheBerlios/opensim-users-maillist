<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Region handshake does not complete
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2012-August/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Region%20handshake%20does%20not%20complete&In-Reply-To=%3C1344857853.59270.YahooMailNeo%40web126105.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010731.html">
   <LINK REL="Next"  HREF="010732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Region handshake does not complete</H1>
    <B>Nicky Perian</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Region%20handshake%20does%20not%20complete&In-Reply-To=%3C1344857853.59270.YahooMailNeo%40web126105.mail.ne1.yahoo.com%3E"
       TITLE="[Opensim-users] Region handshake does not complete">nickyperian at yahoo.com
       </A><BR>
    <I>Mon Aug 13 13:37:33 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010731.html">[Opensim-users] Region handshake does not complete
</A></li>
        <LI>Next message: <A HREF="010732.html">[Opensim-users] Exception rethrown at [0]:
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10735">[ date ]</a>
              <a href="thread.html#10735">[ thread ]</a>
              <a href="subject.html#10735">[ subject ]</a>
              <a href="author.html#10735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Gary,

It appears that all settings on the security tab depend on the firewalls being enabled.
Steps taken.
Enabled firewalls.
Cleared the check at&#160;Filter Internet NAT Redirection for IPv4 Internet Only&#160;
Cleared the checks for port trigger forwarding.
Tested.
It worked.

Thank You!!
Nicky
&#160;



&gt;<i>________________________________
</I>&gt;<i> From: Gary Beck &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">gab4gab at gmail.com</A>&gt;
</I>&gt;<i>To: Nicky Perian &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nickyperian at yahoo.com</A>&gt;; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;<i>Sent: Sunday, August 12, 2012 9:51 PM
</I>&gt;<i>Subject: Re: [Opensim-users] Region handshake does not complete
</I>&gt;<i> 
</I>&gt;<i>
</I>&gt;<i>Nick,
</I>&gt;<i>You need to un-check the 'Filter Internet NAT 
</I>Redirection.'&#160; When checked it will prevent the redirection you need.&#160; 
The hosts file setting seem helpful in getting the TCP mode login process 
started when NAT loop back is not working.&#160; This really isn't helpful 
because it when UDP kicks in the NAT loop back is still needed. Here is a link to a cisco discussion of the issue: <A HREF="http://homecommunity.cisco.com/t5/Wired-Routers/What-s-the-purpose-of-Filter-Internet-NAT-Redirection/td-p/63857&#160;">http://homecommunity.cisco.com/t5/Wired-Routers/What-s-the-purpose-of-Filter-Internet-NAT-Redirection/td-p/63857&#160;</A> 
which contains this:
&gt;<i>If your local systems send packets to the -public- (external) 
</I>IP
&gt;<i>and port of your internal servers, then if the filtering is turned
</I>&gt;<i>on 
</I>then the device will deny those packets; when the filtering is
&gt;<i>turned off, 
</I>the device will re-address those packets and send them
&gt;<i>back inwards. In this 
</I>situation, the source of the connection is local
&gt;<i>and the destination ends up 
</I>being the local server, but the address
&gt;<i>used by the local computer was the 
</I>outside address instead of the
&gt;<i>inside address.
</I>&gt;<i>- Gary Beck
</I>&gt;<i>----- Original Message ----- 
</I>&gt;&gt;<i>From: Nicky  Perian 
</I>&gt;&gt;<i>To: Gary Beck ; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;&gt;<i>Sent: Sunday, August 12, 2012 3:37  PM
</I>&gt;&gt;<i>Subject: Re: [Opensim-users] Region  handshake does not complete
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>e4200  settings that work for me.
</I>&gt;&gt;<i><A HREF="http://picpaste.com/NAT_Loop_Back_e4220-FGNLyJLJ.JPG">http://picpaste.com/NAT_Loop_Back_e4220-FGNLyJLJ.JPG</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i><A HREF="http://picpaste.com/NAT_loop_back_port_range_triggering-LZJD67rg.JPG">http://picpaste.com/NAT_loop_back_port_range_triggering-LZJD67rg.JPG</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>each hosts file&#160;
</I>&gt;&gt;<i>192.168.x.x my.dyndns.domain
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>These might not be the best. I rely on each computer to be firewall  protected and leave the routers open to prevent firewall fighting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thank you for the responses.&#160;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>________________________________
</I>&gt;&gt;&gt;<i> From: Gary Beck &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">gab4gab at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i>To: Nicky Perian  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nickyperian at yahoo.com</A>&gt;; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;&gt;&gt;<i>Sent: Sunday, August 12, 2012 11:55  AM
</I>&gt;&gt;&gt;<i>Subject: Re:  [Opensim-users] Region handshake does not complete
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>The CISCO 'NAT loop back' item is 'Filter  Internet NAT Redirection.'&#160;&#160;&#160;I'm not at my usual location so  I can't check how it's set on my e3200.&#160; I  think&#160;un-checking&#160;that option (the default) allows&#160;the  redirection of your&#160;external IP&#160;back to your local LAN.&#160; It's  one of the firewall settings.
</I>&gt;&gt;&gt;<i>&#160;
</I>&gt;&gt;&gt;<i>----- Original Message ----- 
</I>&gt;&gt;&gt;&gt;<i>From: Nicky  Perian 
</I>&gt;&gt;&gt;&gt;<i>To: Gary Beck ; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;&gt;&gt;&gt;<i>Sent: Sunday, August 12, 2012 11:40  AM
</I>&gt;&gt;&gt;&gt;<i>Subject: Re: [Opensim-users] Region  handshake does not complete
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Thank  you for the reply.
</I>&gt;&gt;&gt;&gt;<i>I  have a cisco e4200. It has settings for port forward, triggering, DMZ, and  a means to place a gaming app at a specific priority.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>But,it has no&#160;mention of NAT loop  back. I assume that NAT loop back is just another name for one of the  other port handling features mentioned above.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>I have searched google and not found how to set  NAT loop back. Actually, about the only mention to pop up is OS  wiki.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>How is NAT loop back set up for any cisco  router?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Thanks,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Nicky
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>&#160;&#160;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> From: Gary Beck  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">gab4gab at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;&gt;<i>To: Nicky Perian  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">nickyperian at yahoo.com</A>&gt;; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;&gt;&gt;&gt;&gt;<i>Sent: Saturday, August  11, 2012 9:30 PM
</I>&gt;&gt;&gt;&gt;&gt;<i>Subject: Re: [Opensim-users] Region  handshake does not complete
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i>Nicky,
</I>&gt;&gt;&gt;&gt;&gt;<i>At handshake time the opensim server sends  the viewer the resolved IP address of the region being connected  to.&#160; I'm assuming that would be your dyndns domain name + a port  number.&#160; However the server send the resolved address, not the  domain name.&#160; So the viewer will be getting the external IP + port  number.&#160; This can work if you local network router has NAT loopback  enabled.&#160; If not the viewer attempts to use the address and doesn't  reach the server.&#160; The host file settings would be effective if at  handshake time the server sent domain names to be resolved but it  doesn't.
</I>&gt;&gt;&gt;&gt;&gt;<i>Hope this helps. 
</I>&gt;&gt;&gt;&gt;&gt;<i>- Gary Beck
</I>&gt;&gt;&gt;&gt;&gt;<i>----- Original Message ----- 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>From: Nicky Perian 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A> 
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>Sent: Saturday, August 11, 2012  9:57 PM
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>Subject: [Opensim-users] Region  handshake does not complete
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>I am running a diva under win 7 64 bit. Same machine as several  linux VMs. I want to connect each VM to the opensim sever. The VM's  network cards are set to receive a DHCP ip from the router and that  works. I can connect to any external grid (SL &amp; OS) from the VM's.  I have a dyndns domain name assigned to the cable company external  IP.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>The hosts file in the VM is set to server's lan ip and the dyndns  domain name. Ping to the domain wraps to the server IP.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>At viewer start I receive the splash from the server.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>The login will not get past establishing the region  handshake.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>Hints please.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>Nicky
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>Opensim-users 
</I>          mailing 
          list
&gt;&gt;&gt;&gt;&gt;&gt;<i><A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i><A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-users/attachments/20120813/1d119b99/attachment.html">https://lists.berlios.de/pipermail/opensim-users/attachments/20120813/1d119b99/attachment.html</A>&gt;
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010731.html">[Opensim-users] Region handshake does not complete
</A></li>
	<LI>Next message: <A HREF="010732.html">[Opensim-users] Exception rethrown at [0]:
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10735">[ date ]</a>
              <a href="thread.html#10735">[ thread ]</a>
              <a href="subject.html#10735">[ subject ]</a>
              <a href="author.html#10735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
