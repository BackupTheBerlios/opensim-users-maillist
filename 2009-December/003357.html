<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Database cleanup
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Database%20cleanup&In-Reply-To=%3C4B311933.2000805%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003363.html">
   <LINK REL="Next"  HREF="003358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Database cleanup</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Database%20cleanup&In-Reply-To=%3C4B311933.2000805%40googlemail.com%3E"
       TITLE="[Opensim-users] Database cleanup">jjustincc at googlemail.com
       </A><BR>
    <I>Tue Dec 22 20:08:35 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="003363.html">[Opensim-users] Database cleanup
</A></li>
        <LI>Next message: <A HREF="003358.html">[Opensim-users] Database cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3357">[ date ]</a>
              <a href="thread.html#3357">[ thread ]</a>
              <a href="subject.html#3357">[ subject ]</a>
              <a href="author.html#3357">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Karen Palen wrote:
&gt;<i> That is one way to solve the problem, although I don't know MySQL well enough to figure out how!
</I>&gt;<i> 
</I>&gt;<i> I was actually hoping that OpenSim had some built in utility that would do this in a more intelligent way though. Essentially the knowledge about what is deleted or not is fairly high level information within OpenSim itself. A &quot;touch&quot; would at best be an emulation of this.
</I>&gt;<i> 
</I>&gt;<i> Ideally this would run regularly and keep down the &quot;cruft&quot; build-up.
</I>&gt;<i> 
</I>&gt;<i> Next best would be to dump each region to an OAR file, each avatar's inventory to an IAR file then build a new database from that! It would work, but could take several days of effort to make sure that it was done right. My next thought is to use Second Inventory to do the same thing, but that could be even slower!
</I>
Dumping OARs and IARs would work but it would be tedious.

For a long time I've wanted to write a tool that would effectively do this 
automatically, identifying the cruft and dumping it via the same mechanisms that 
are used to identify the required asset chains in OAR and IAR saves.  This 
wouldn't be too hard to do for a standalone.  It would be okay for very small 
grids (as long as they can be taken offline for a period).

The larger the grid, the more difficult it gets.  This simplistic dependency 
identification approach seems near impossible for &quot;open&quot; grids (those allowing 
3rd party region simulators).

Unfortunately, such a tool is way back on my pro bono list, way behind all the 
other interesting things I've discussed recently but haven't done yet :)

&gt;<i> 
</I>&gt;<i> Karen
</I>&gt;<i> 
</I>&gt;<i> --- On Mon, 12/21/09, LaeMing &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">laeming at exemail.com.au</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> From: LaeMing &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">laeming at exemail.com.au</A>&gt;
</I>&gt;&gt;<i> Subject: Re: [Opensim-users] Database cleanup
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> Date: Monday, December 21, 2009, 7:34 PM
</I>&gt;&gt;<i> Hmmm. When I was in the DB manually
</I>&gt;&gt;<i> editing all my regions' ground textures 
</I>&gt;&gt;<i> and so (36 region megaregion, this was far quicker than
</I>&gt;&gt;<i> doing it in-sim), I 
</I>&gt;&gt;<i> noticed a lot of old regiondata from earlier iterations of
</I>&gt;&gt;<i> my OpenSim 
</I>&gt;&gt;<i> experiments hanging about too. I was able to hand-delete
</I>&gt;&gt;<i> all the unwanted 
</I>&gt;&gt;<i> regioninfo from the mySql tools, but the tools didn't want
</I>&gt;&gt;<i> to let me enter 
</I>&gt;&gt;<i> edit mode for the binary blobs of region heightmaps, so I
</I>&gt;&gt;<i> couldn't work out 
</I>&gt;&gt;<i> how to hand-delete those.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I imagine, like Karen, there is also a lot of dangling
</I>&gt;&gt;<i> cruft built up in my 
</I>&gt;&gt;<i> inventory too. Since I am the only user for now, would it
</I>&gt;&gt;<i> be fair to say 
</I>&gt;&gt;<i> anything in world or in my current inventory has been
</I>&gt;&gt;<i> 'touched' last login, 
</I>&gt;&gt;<i> and assuming mySql does (or can) flag touch dates for
</I>&gt;&gt;<i> entries, could I just 
</I>&gt;&gt;<i> find the method of deleting all entries untouched since my
</I>&gt;&gt;<i> last login (after a 
</I>&gt;&gt;<i> full backup of course)?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Lae
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tuesday December 22 2009 09:52:22 Karen Palen wrote:
</I>&gt;&gt;&gt;<i> My OpenSim database now tops 1Gb with only a single
</I>&gt;&gt;<i> region!
</I>&gt;&gt;&gt;<i> Looking at the database with MySql tools shows that
</I>&gt;&gt;<i> there is a whole lot of
</I>&gt;&gt;&gt;<i>   stuff that I have tried and discarded still in
</I>&gt;&gt;<i> the database and that it
</I>&gt;&gt;&gt;<i>   does not seem to be flagged for removal.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Is there some OpenSim database maintenance tool that I
</I>&gt;&gt;<i> haven't found yet?
</I>&gt;&gt;&gt;<i> How DO people like OSGrid keep the database to a
</I>&gt;&gt;<i> manageable size?
</I>&gt;&gt;&gt;<i> Karen
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>       
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i> 
</I>

-- 
Justin Clark-Casey (justincc)
<A HREF="http://justincc.org">http://justincc.org</A>
<A HREF="http://twitter.com/justincc">http://twitter.com/justincc</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003363.html">[Opensim-users] Database cleanup
</A></li>
	<LI>Next message: <A HREF="003358.html">[Opensim-users] Database cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3357">[ date ]</a>
              <a href="thread.html#3357">[ thread ]</a>
              <a href="subject.html#3357">[ subject ]</a>
              <a href="author.html#3357">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
