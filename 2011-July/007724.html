<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Database cleanup and purge
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Database%20cleanup%20and%20purge&In-Reply-To=%3C4E23194C.6070501%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007723.html">
   <LINK REL="Next"  HREF="007727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Database cleanup and purge</H1>
    <B>Karen Palen</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Database%20cleanup%20and%20purge&In-Reply-To=%3C4E23194C.6070501%40gmail.com%3E"
       TITLE="[Opensim-users] Database cleanup and purge">karenpalensl at gmail.com
       </A><BR>
    <I>Sun Jul 17 19:18:04 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007723.html">[Opensim-users] backups
</A></li>
        <LI>Next message: <A HREF="007727.html">[Opensim-users] Database cleanup and purge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7724">[ date ]</a>
              <a href="thread.html#7724">[ thread ]</a>
              <a href="subject.html#7724">[ subject ]</a>
              <a href="author.html#7724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another aspect of the recent discussion about backups is the ability to
cleanup the database and purge &quot;orphaned&quot; assets.

If you look closely at an OpenSim database that has been in use for  a
while the assets portion is huge, even if all regions and inventory has
been deleted.

I first ran across this after loading several huge OAR and IAR files
multiple times - each time the files were loaded it created an entire
asset tree in the database. The database grew to 10Gb with only 4 active
regions!

It seems that when an object/wearable/texture/whatever is deleted then
all that is actually removed is th epointer entry that refers to the
underlying data, if all references to that data have been deleted then
it is left as an orphan. There are very good reasons not to delete these
orphans from within OpenSim, but at present there is no mechanism to do
this even offline.

About the best that can be done at present is to dump everything to
OAR/IAR files and reload then periodically. This is a reasonable
workaround, but not really a long term solution.

Back when 0.6.8/9 (different database setup) was in use there was an
effort to create an SQL macro set to do this, but it was shelved as
0.7.x came closer.

Is there some other solution out there that I don't know about?

Maybe this would be a worthwhile support project. I have very little SQL
experience, but a lifetime as a C/C++ programmer and would be willing to
contribute what I can.

Karen

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007723.html">[Opensim-users] backups
</A></li>
	<LI>Next message: <A HREF="007727.html">[Opensim-users] Database cleanup and purge
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7724">[ date ]</a>
              <a href="thread.html#7724">[ thread ]</a>
              <a href="subject.html#7724">[ subject ]</a>
              <a href="author.html#7724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
