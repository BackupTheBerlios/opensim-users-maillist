<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] Opensim 0.6.6 release standalone hangs at 'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet computers
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Opensim%200.6.6%20release%20standalone%20hangs%20at%0A%20%27Waiting%20for%20region%20handshake%27%20%28LoginPacketNeverReceived%29%20on%20other%20intranet%0A%20computers&In-Reply-To=%3C006101ca4d84%249138efd0%24b3aacf70%24%40freeserve.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002887.html">
   <LINK REL="Next"  HREF="002869.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] Opensim 0.6.6 release standalone hangs at 'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet computers</H1>
    <B>Kevin Buckley</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20Opensim%200.6.6%20release%20standalone%20hangs%20at%0A%20%27Waiting%20for%20region%20handshake%27%20%28LoginPacketNeverReceived%29%20on%20other%20intranet%0A%20computers&In-Reply-To=%3C006101ca4d84%249138efd0%24b3aacf70%24%40freeserve.co.uk%3E"
       TITLE="[Opensim-users] Opensim 0.6.6 release standalone hangs at 'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet computers">kevin at buckley70.freeserve.co.uk
       </A><BR>
    <I>Thu Oct 15 12:45:10 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002887.html">[Opensim-users] Opensim 0.6.6 release standalone hangs at 'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet computers
</A></li>
        <LI>Next message: <A HREF="002869.html">[Opensim-users] Fwd: Waiting for Region Handshake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2894">[ date ]</a>
              <a href="thread.html#2894">[ thread ]</a>
              <a href="subject.html#2894">[ subject ]</a>
              <a href="author.html#2894">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When you say you use an external host name in Regions.ini, do you mean like:

ExternalHostName = &quot;<A HREF="http://www.mydomain.com">http://www.mydomain.com</A>&quot; (with, or without the quote
marks?)

or 

ExternalHostName = 11.22.33.44


Kevin

-----Original Message-----
From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users-bounces at lists.berlios.de</A>
[mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users-bounces at lists.berlios.de</A>] On Behalf Of Robert Klein
Sent: 15 October 2009 02:06
To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">opensim-users at lists.berlios.de</A>
Subject: Re: [Opensim-users] Opensim 0.6.6 release standalone hangs at
'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet
computers



Hey Kevin,

I am running 0.6.4 and use 0.0.0.0 for internal port and an external
hostname for the external_host_name in Regions. I also use the external host
name for the loginuri on any machine external to my internal network and I
use the IP address in loginuri for machines inside my network. Hope this
helps. 

-Robert


Kevin Buckley wrote:
&gt;<i> 
</I>&gt;<i> So this is where I am at (opensim 0.6.6 working externally, but not
</I>&gt;<i> accessible on my internal LAN).
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Many thanks to Clive Gould for getting me this far! (and I'm making this
</I>&gt;<i> as
</I>&gt;<i> detailed as I can to help anyone else stuck on this!)
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> For a 'standalone' implementation, V0.0.6 'Regions.ini' in
</I>&gt;<i> (/bin/Regions)needs to look like this:
</I>&gt;<i> 
</I>&gt;<i> ===========================================
</I>&gt;<i> 
</I>&gt;<i> [Test Island]
</I>&gt;<i> 
</I>&gt;<i> RegionUUID = 37d57d73-ff97-482f-84ab-4f1f132a4092
</I>&gt;<i> 
</I>&gt;<i> Location = 1000,1000
</I>&gt;<i> 
</I>&gt;<i> InternalAddress = 0.0.0.0
</I>&gt;<i> 
</I>&gt;<i> InternalPort = 9100
</I>&gt;<i> 
</I>&gt;<i> AllowAlternatePorts = False
</I>&gt;<i> 
</I>&gt;<i> ExternalHostName = 11.22.33.44
</I>&gt;<i> 
</I>&gt;<i> MasterAvatarFirstName = 
</I>&gt;<i> 
</I>&gt;<i> MasterAvatarLastName = 
</I>&gt;<i> 
</I>&gt;<i> MasterAvatarSandboxPassword =
</I>&gt;<i> 
</I>&gt;<i> ===========================================
</I>&gt;<i> 
</I>&gt;<i> Running opensim the first time may enter most of the information - but
</I>&gt;<i> some
</I>&gt;<i> of it is not correct, so you need to edit it.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> (Note: The wiki's talk extensively about files in '/bin/Regions' called
</I>&gt;<i> 'default.xml'.  This is no longer the case and this file is replaced by
</I>&gt;<i> 'Regions.ini' I believe.)
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> The 'ExternalHostName' is your numeric external IP address (11.22.33.44 is
</I>&gt;<i> just example which I'll use again later).  I don't believe using a FQDN
</I>&gt;<i> like
</I>&gt;<i> 'www.mydomain.co.uk' will work here (unfortunately).
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I have changed the InternalPort from 9000 to 9100 because I already have
</I>&gt;<i> something on Port 9000.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> In the router I have forwarded port 9100 to IP address 192.168.10.100
</I>&gt;<i> (internal IP address of my opensim server PC) for both TCP and UDP
</I>&gt;<i> packets.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Externally, my ISP provides a Dynamic IP Address.  I have a dynamic DNS
</I>&gt;<i> service (like dynDNS) which constantly ensures 'www.mydomain.co.uk' points
</I>&gt;<i> at my current external IP address ('11.22.33.44').
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> So - in the 2L viewer shortcut I use: &quot;C:\Program
</I>&gt;<i> Files\SecondLife\SecondLife.exe&quot;  -loginuri <A HREF="http://www.mydomain.co.uk:9100">http://www.mydomain.co.uk:9100</A>
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> This works fine for a viewer outside the firewall .
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> However - this raises 2 problems.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Problem-1:  Whenever my ISP changes my IP address (about once a week) I
</I>&gt;<i> have
</I>&gt;<i> to manually edit 'ExternalHostName' in my 'Regions.ini' file and restart
</I>&gt;<i> opensim!
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Problem2:  I cannot access opensim from inside the firewall (PC's running
</I>&gt;<i> Windows XP).  Even though I have edited the 'hosts' file (in
</I>&gt;<i> c:Windows/system32/drivers/etc) to forward 'www.mydomain.co.uk' to
</I>&gt;<i> 192.168.10.100 - so the viewer can 'see' opensim, it hangs at the region
</I>&gt;<i> handshake again (because, I guess, the viewer is comparing 192.168.10.100,
</I>&gt;<i> which it resolved from the hosts file, with 11.22.33.44 which I also guess
</I>&gt;<i> is sent somewhere in the region login packet from opensim).
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Problem#1 I could live with.  But the fact that it won't login unless the
</I>&gt;<i> IP
</I>&gt;<i> address provided in the viewer exactly matches the address in
</I>&gt;<i> 'Regions.ini'
</I>&gt;<i> makes it unworkable (and it seems a strange requirement - everything up to
</I>&gt;<i> that point works just fine!).
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I noticed from searching the forums that a request to fix this (I think)
</I>&gt;<i> was
</I>&gt;<i> put in by Paul Fishwick a few months ago.  Has it been fixed in a later
</I>&gt;<i> revision?
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Any ongoing help appreciated! - Kevin
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> *UPDATE* - I just saw 0.6.7 has been released - does anyone know if this
</I>&gt;<i> issue has been resolved in this version?
</I>&gt;<i> 
</I>&gt;<i> I just built it using same ini's as v0.6.6 and the problem still seems to
</I>&gt;<i> be
</I>&gt;<i> there  :-(
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-- 
View this message in context:
<A HREF="http://n2.nabble.com/Opensim-0-6-6-release-standalone-hangs-at-Waiting-for-r">http://n2.nabble.com/Opensim-0-6-6-release-standalone-hangs-at-Waiting-for-r</A>
egion-handshake-LoginPacketNeverReceived-on-os-tp3817749p3826584.html
Sent from the opensim-users mailing list archive at Nabble.com.
_______________________________________________
Opensim-users mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002887.html">[Opensim-users] Opensim 0.6.6 release standalone hangs at 'Waiting for region handshake' (LoginPacketNeverReceived) on other intranet computers
</A></li>
	<LI>Next message: <A HREF="002869.html">[Opensim-users] Fwd: Waiting for Region Handshake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2894">[ date ]</a>
              <a href="thread.html#2894">[ thread ]</a>
              <a href="subject.html#2894">[ subject ]</a>
              <a href="author.html#2894">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
