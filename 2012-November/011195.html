<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-users] A bit confused
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-users/2012-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20A%20bit%20confused&In-Reply-To=%3C509C7A4D.9040901%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011176.html">
   <LINK REL="Next"  HREF="011173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-users] A bit confused</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-users%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-users%5D%20A%20bit%20confused&In-Reply-To=%3C509C7A4D.9040901%40googlemail.com%3E"
       TITLE="[Opensim-users] A bit confused">jjustincc at googlemail.com
       </A><BR>
    <I>Fri Nov  9 04:36:45 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011176.html">[Opensim-users] A bit confused
</A></li>
        <LI>Next message: <A HREF="011173.html">[Opensim-users] A bit confused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11195">[ date ]</a>
              <a href="thread.html#11195">[ thread ]</a>
              <a href="subject.html#11195">[ subject ]</a>
              <a href="author.html#11195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yeah, that's not good.  I suspect the C# HttpServer we're using is not very performant but I'm not aware of any testing 
done on that.  And as you probably know, there are few alternatives short of directing the CAP directly to a webserver 
for processing (which would be a lot of work though and interesting long-term solution for larger installations).

I'm hoping that correcting inventory version numbers will improve matters though that's largely a hypothesis at this 
stage.  Also, if a cache-cleared viewer is determined to launch large number of requests at once that would still be a 
problem.

I wonder if this kind of issue is behind LL's work on improving CAP comms.

On 07/11/12 16:36, Oren Hurvitz wrote:
&gt;<i> I've been looking at this issue as well, and it's pretty certain that it's
</I>&gt;<i> due to the number of HTTP inventory requests sent from the viewer. I added
</I>&gt;<i> logging that shows that when the number of incoming HTTP requests to OpenSim
</I>&gt;<i> exceeds about 10/second it starts handling requests very slowly (i.e.,
</I>&gt;<i> handling 50 requests at once is slower than handling 50 requests that come
</I>&gt;<i> in one at a time). I was actually able to improve performance a bit by
</I>&gt;<i> adding delays to make OpenSim accept incoming HTTP connections more slowly!
</I>&gt;<i> But that's a dirty hack, and I'm looking for a better solution.
</I>&gt;<i>
</I>&gt;<i> I have found that one reliable source of problems happens when a user
</I>&gt;<i> logs-in: the LLLoginResponse packet includes a list of all of the user's
</I>&gt;<i> active gestures, and then the viewer sends *separate* FetchInventory
</I>&gt;<i> requests for each of those gestures. For example, if the user has 50 active
</I>&gt;<i> gestures then the viewer sends 50 HTTP requests at once, and that overwhelms
</I>&gt;<i> OpenSim for a while. During that time other requests from the client are
</I>&gt;<i> also handled slowly.
</I>&gt;<i>
</I>&gt;<i> I've put in a request to Firestorm (as the leading OpenSim viewer) to change
</I>&gt;<i> their behavior so that they'll request all of the gestures at once: see
</I>&gt;<i> <A HREF="http://jira.phoenixviewer.com/browse/FIRE-8146">http://jira.phoenixviewer.com/browse/FIRE-8146</A> . But they've put this issue
</I>&gt;<i> on the &quot;Wishlist&quot;, so unless someone steps in (Armin Weatherwax?) this might
</I>&gt;<i> never be fixed on the viewer side.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://opensim-users.2152040.n2.nabble.com/A-bit-confused-tp7578881p7578896.html">http://opensim-users.2152040.n2.nabble.com/A-bit-confused-tp7578881p7578896.html</A>
</I>&gt;<i> Sent from the opensim-users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">Opensim-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-users">https://lists.berlios.de/mailman/listinfo/opensim-users</A>
</I>&gt;<i>
</I>

-- 
Justin Clark-Casey (justincc)
OSVW Consulting
<A HREF="http://justincc.org">http://justincc.org</A>
<A HREF="http://twitter.com/justincc">http://twitter.com/justincc</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011176.html">[Opensim-users] A bit confused
</A></li>
	<LI>Next message: <A HREF="011173.html">[Opensim-users] A bit confused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11195">[ date ]</a>
              <a href="thread.html#11195">[ thread ]</a>
              <a href="subject.html#11195">[ subject ]</a>
              <a href="author.html#11195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-users">More information about the Opensim-users
mailing list</a><br>
</body></html>
